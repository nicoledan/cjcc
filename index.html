<!DOCTYPE html>
<html>
<head>
    <!-- Description: This sample demonstrates how to use clickable polygons to view information about the selected polygon -->
    <!-- Attribution:
    Leaflet Tutorials, Url: https://leafletjs.com/examples.html
    Styling inspired by Esri Story Map: https://storymaps.esri.com/stories/2016/top-stories/
    -->
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Public Safety and Justice Report by Ward</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="https://dc.gov/sites/default/files/favicon_0.ico">
    <script src="js/wards.js"></script>
</head>

<body>
<div class="container-fluid">

  <div class='header'>
      <div id="title">Public Safety and Justice Report by Ward</div>
      <div style="float:right;" class="row">
          <a style="color:rgb(206,206,206);font-size:14px; margin-right:10px;"
             href="https://github.com/nicoledan/cjcc" target="_blank">This on Github</a>
          <a style="color:rgb(206,206,206);font-size:14px; margin-right:10px;" href="javascript:void(0)"
             onclick="openAbout()">About This Map</a>
            <a style="color:rgb(206,206,206);font-size:14px;" href="https://planning.dc.gov/page/wards-district-columbia">What's my ward?</a>
      </div>
  </div>
<div id="map"></div>

<div id="content">

<div class="row">

   <iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?list=PL3-WlHouUNsFcqWeLCieTjVo3vvVKg9uD" frameborder="0" allowfullscreen class="col-lg-6 video"></iframe>
   <iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?list=PL3-WlHouUNsH3t5wZ4gEQlEPnYnDRwe0d" frameborder="0" allowfullscreen class="col-lg-6 video"></iframe>
</div> <!--close row !-->

<h2>Violent Crime</h2>
  <iframe src="https://docs.google.com/spreadsheets/d/1aQeslQDb20clr9Res_ZQB9j2w0v-xXU0xY_b0ddFL9I/pubhtml?gid=1479740516&amp;single=true&amp;widget=true&amp;headers=false" class="col-md-12 crimegraph"></iframe>
  <iframe src="https://docs.google.com/spreadsheets/d/1aQeslQDb20clr9Res_ZQB9j2w0v-xXU0xY_b0ddFL9I/pubhtml?gid=1733029272&amp;single=true&amp;widget=true&amp;headers=false" class="col-md-12 crimegraph"></iframe>
<h2>Property Crime</h2>
  <iframe src="https://docs.google.com/spreadsheets/d/1aQeslQDb20clr9Res_ZQB9j2w0v-xXU0xY_b0ddFL9I/pubhtml?gid=72402530&amp;single=true&amp;widget=true&amp;headers=false" class="col-md-12 crimegraph"></iframe>
  <iframe src="https://docs.google.com/spreadsheets/d/1aQeslQDb20clr9Res_ZQB9j2w0v-xXU0xY_b0ddFL9I/pubhtml?gid=1793247341&amp;single=true&amp;widget=true&amp;headers=false" class="col-md-12 crimegraph"></iframe>

<div id="districtreport">
<h2>Report</h2>
<p></p>
<ul>
	<li>African American residents decreased (54% to 49%).</li>
	<li>Other races’ residents increased.</li>
</ul>
<h3>Education</h3>
<ul>
	<li>In 2009: 76% have a high school diploma.</li>
	<li>In 2013: 88% have a high school diploma.</li>
	<li>The city average of those who have college degrees is 52%.</li>
</ul>
<h3>Infant Mortality Rates</h3>
<ul>
	<li>National: 6 in 1000 live births.</li>
	<li>District: 6.8 in 1000 live births.</li>
	<li>African Americans: 9.9 in 1000 live births.</li>
	<li>Hispanics: 6.4 in 1000 live births. </li>
	<li>Caucasians: 1.7 in 1000 live births.</li>
</ul>

<h3>Income (2009-2013)</h3>
<ul>
	<li>Employment grew 1%.</li>
	<li>75% of residents have a job. </li>
	<li>2009 average household income: $90,580 in 2009 to 101,076 in 2013.</li>
</ul>

<h3>Violent Crime</h3>
<p>The 2014 District average for violent crimes was 756. 60% of District’s 2014 violent crime is in 64 of District’s 179 census tracks.</p>
<p>From 2009-2014:</p>
<ul>
	<li>Violent crime fell 15%.</li>
	<li>7 of the 8 wards saw declines ranging from 8 to 36% in violent crime.</li>
	<li>Homicides fell 27%.</li>
	<li>ADW crimes fell 8%.</li>
	<li>District Wide robberies fell by 23%.</li>
	<li>Reported sexual crimes grew by 132%.</li>
</ul>
<p>In 2014, the District averaged:</p>
<ul>
	<li>38 sexual crimes per ward.</li>
	<li>417 robberies.</li>
</ul>

<h3>Property Crime </h3>
<p>Property crime is mainly focused on shopping and entertainment districts. Since 2001, 911 calls fell by 47%, dropping 17% from 2009-2014. In 2014 each Ward had at least 200 burglaries.
From 2009-2014:</p>
<ul>
	<li>Property crime grew 22.5% .</li>
	<li>Increases ranged from 18% to 43% per ward.</li>
	<li>Reported thefts grew by 59%.</li>
	<li>Burglary fell 13%.</li>
	<li>Motor vehicle theft fell by 35%, each ward had a decrease of about 20%.</li>
	<li>Theft from auto increased by 32%.</li>
	<li>Theft grew 59%.</li>
	<li>Theft grew in seven wards by more than 40%.</li>
</ul>
<p>In 2014, the District averaged:</p>
<ul>
	<li>Property crime: 4,031.</li>
	<li>Motor vehicle theft: 390.</li>
	<li>Theft: 1828.</li>
</ul>
</div> <!-- close districtreport !-->

</div> <!-- close content !-->

<footer class="col-lg-12"><p>Based on <a href="https://cjcc.dc.gov/sites/default/files/dc/sites/cjcc/page_content/attachments/Public%20Safety%20and%20Justice%20Report.pdf">Public Safety and Justice Report in the District of Columbia 2009-2014</a></p></footer>

<div id="about">
    <a id="dismiss-about" onclick="closeAbout()">×</a>
    <div id="inner">
        <p style="font-size: 1.4em; text-transform: uppercase; text-align: center">About this map
        </p>
        <p style="font-size:1.2em;">
            This map organizes the data from the 2017 Public Safety and Justice Report put together from the CJCC.</p>
        <p><strong>Instructions</strong>
            <br/> Click a ward on the map to display info</p>
        <p><strong>Built with...</strong>
            <br/> <a href="https://leafletjs.com/">Leaflet</a>, <a href="https://jquery.com/">jQuery</a></p>
        <p><strong>Download Ward 2012 Data in GeoJSON</strong>
            <br/><a href="https://opendata.arcgis.com/datasets/0ef47379cbae44e88267c01eaec2ff6e_31.geojson">https://opendata.arcgis.com/datasets/0ef47379cbae44e88267c01eaec2ff6e_31.geojson</a>
        </p>
        <p><strong>View Ward 2012 Data on DC Open Data</strong>
            <br/><a href="http://opendata.dc.gov/datasets/ward-2012" target="_blank">https://opendata.arcgis.com/datasets/0ef47379cbae44e88267c01eaec2ff6e_31</a>
        </p>
        <p><strong>DC Open Data</strong>
            <br/><a href="http://opendata.dc.gov" target="_blank">http://opendata.dc.gov</a></p>
        <p><strong>Adapted from the following Github Repository</strong>
            <br/><a href="https://github.com/DCgov/opendatadc-starterkit" target="_blank">https://github.com/DCgov/opendatadc-starterkit</a>
        </p>
        <p><strong>Github Repository for this project</strong>
          <br/><a href="https://github.com/nicoledan/cjcc" target="_blank">https://github.com/nicoledan/cjcc</a>
        </p>
        <div id="logos" style="text-align: center">
            <img src="https://moca.dc.gov/sites/default/files/styles/callout_interior_graphic/public/dc/sites/ocaf/agency_content/images/We%20Are%20Washington.png"
                 title="We are DC logo">
        </div>
    </div>

</div>
<script>
    //Data source from DC Open Data
    //var wardGeoJsonUrl = "https://opendata.arcgis.com/datasets/0ef47379cbae44e88267c01eaec2ff6e_31.geojson";
    // var wardGeoJsonUrl = "js/wards.geojson";
    //Replace with your own token
    var accessToken = "pk.eyJ1Ijoibmljb2xlZGFuIiwiYSI6ImNpdmpwbnlwNTAxZGQyemxiejRkbDF4YWcifQ.mgWMXU8eZ31iIydjN1I6NA";
    //sets map functions including turning off the standard zoom buttons
    //and setting intial map focus point
    var map = L.map('map', {
        center: [38.8929, -77.0252],
        zoom: 11,
        zoomControl: false
    });
    //Create map and load basemap tile layer
    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery © <a href="https://mapbox.com">Mapbox</a>',
        id: 'mapbox.streets',
        maxZoom: 17,
        minZoom: 9,
        accessToken: accessToken
    }).addTo(map);
    // Add our zoom control manually where we want to
    var zoomControl = L.control.zoom({
        position: 'bottomleft'
    });
    map.addControl(zoomControl);
    //set style of ward layer
    function style(feature) {
        return {
            weight: 2,
            opacity: 0.8,
            color: 'blue',
            fillOpacity: 0.0
        };
    }
    //Add DC Ward geojson to map
    //$.getJSON(wardGeoJsonUrl, function (data) {
        //var geojson = L.geoJson(data, {
            //style: style,
            //onEachFeature: function (feature, layer) {
                //create popup for each ward polygon
              //  layer.bindPopup(feature.properties.NAME + "<br>" + "Rep. " + feature.properties.REP_NAME + "," + "<br>" + feature.properties.REP_PHONE)
            //}
        //});
        //geojson.addTo(map);
    //});
    L.geoJson(wards, {
      style: function (feature) {
          return {
             weight: 2,
             opacity: 0.8,
             color: 'blue',
             fillOpacity: 0.3 };
      },
      onEachFeature: function (feature,layer) {
        layer.bindPopup(feature.properties.NAME + "<br>" + "Rep. " + feature.properties.REP_NAME + "," + "<br>" + feature.properties.REP_PHONE + "<br>" + "<a href='" + feature.properties.PAGE_URL + "' target=_blank>" + "Learn more about this ward." + "</a>" );
      }
    }).addTo(map);
    //open About This panel
    function openAbout() {
        $("#about").show();
        return false;
    }
    //close About This panel
    function closeAbout() {
        $("#about").hide();
        return false;
    }
</script>
</div> <!-- close container !-->
</body>
</html>
